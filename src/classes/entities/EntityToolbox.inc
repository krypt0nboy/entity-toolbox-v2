<?php

/**
 * @file
 *
 * This file contains entity_toolbox entity classes.
 */

/**
 * Class EntityToolbox
 */
class EntityToolbox extends Entity {
  use
    EntityToolboxCommonTraits,
    EntityToolboxDependentTraits;

  /**
   * @var EntityGroup $entityGroup
   *   The entity group.
   *
   * @see hook_group_attach_info().
   */
  protected $entityGroup;
  /**
   * @access public
   * @var bool $is_new
   *   Whether the entity is new or not.
   */
  public $is_new;
  /**
   * @var string $type
   *   The bundle property.
   */
  public $type;
  /**
   * @var int $vid
   *   The entity vid.
   */
  public $vid;
  /**
   * @var bool $revision
   */
  public $revision;
  /**
   * @var bool $is_new_revision
   */
  public $is_new_revision;
  /**
   * @var EntityToolbox $original
   */
  public $original;
  /**
   * @var int $default_revision
   */
  public $default_revision;
  /**
   * @var array $content
   *   The entity content.
   */
  public $content = array();
  /**
   * @var bool $status
   */
  public $status;

  /**
   * Constructor.
   *
   * @param array $values
   *   Values.
   * @param       $entity_type
   *   The entity type.
   *
   * @throws \Exception
   */
  public function __construct($values = array(), $entity_type = NULL) {
    parent::__construct($values, $entity_type);
  }

  /**
   * {@inheritdoc}
   */
  public function setUp() {
    parent::setUp();
    $this->autoSetToolboxInfo();
    $this->toolboxHelper = new EntityToolboxHelper(array('data_holder' => $this));
  }

  /**
   * Init phase where construct args are set.
   *
   * @param array $args
   */
  protected function constructSet($args) {
    $this->setConstructArgs($args);
    $this->bulkSet($args);
  }

  /**
   * @return string
   */
  public function getEntityGroup() {
    return $this->entityGroup;
  }

  /**
   * @param string $entityGroup
   */
  public function setEntityGroup($entityGroup) {
    $this->entityGroup = $entityGroup;
  }

  /**
   * Return the entity URI.
   *
   * @return array
   *   Uri.
   */
  protected function defaultUri() {
    return array('path' => "$this->entityType/" . $this->{$this->idKey});
  }

  /**
   * @return array
   */
  public function uri() {
    return $this->defaultUri(); // TODO: Change the autogenerated stub
  }

  /**
   * @return mixed|null
   */
  public function identifier() {
    return isset($this->{$this->idKey}) ? $this->{$this->idKey} : NULL;
  }

}